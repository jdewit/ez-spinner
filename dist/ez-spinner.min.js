angular.module("ez.spinner",[]).config(["$httpProvider",function(a){a.interceptors.push("ezSpinnerInterceptor")}]).constant("ezSpinnerConfig",{ignorePathRegex:"",initWait:300,maxWait:15e3}).provider("ezSpinnerService",function(){this.$get=[function(){return{callback:null,hidden:!0,numLoadings:0,show:function(){this.hidden=!1,"function"==typeof this.callback&&this.callback(this.hidden)},hide:function(){this.hidden=!0,this.numLoadings=0,"function"==typeof this.callback&&this.callback(this.hidden)}}}]}).service("ezSpinnerInterceptor",["$q","$timeout","ezSpinnerConfig","ezSpinnerService",function(a,b,c,d){var e,f=function(){e&&b.cancel(e)},g=function(a){return!(c.ignorePathRegex&&a.match(c.ignorePathRegex))};return{request:function(h){return f(),g(h.url)&&(d.numLoadings+=1,e=b(function(){d.numLoadings>0&&d.show(),e=b(function(){d.hide()},c.maxWait)},c.initWait)),h||a.when(h)},response:function(b){return g(b.config.url)&&(d.numLoadings-=1,d.numLoadings<1&&(d.hide(),f())),b||a.when(b)},responseError:function(b){return g(b.config.url)&&(d.numLoadings-=1,d.numLoadings<1&&(d.hide(),f())),a.reject(b)}}}]).directive("ezSpinner",["ezSpinnerService",function(a){return{restrict:"EA",replace:!0,transclude:!0,template:'<div class="ez-spinner" ng-hide="hidden"><div ng-transclude></div></div>',link:function(b){b.hidden=!0,a.callback=function(a){b.hidden=a}}}}]);