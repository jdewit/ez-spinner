angular.module("ez.spinner",[]).config(["$httpProvider",function(a){a.interceptors.push("ezSpinnerInterceptor")}]).constant("ezSpinnerConfig",{ignorePathRegex:"",initWait:500,maxWait:15e3}).provider("ezSpinnerService",function(){this.$get=[function(){return{callback:null,hidden:!0,show:function(){this.hidden=!1,"function"==typeof this.callback&&this.callback(this.hidden)},hide:function(){this.hidden=!0,"function"==typeof this.callback&&this.callback(this.hidden)}}}]}).service("ezSpinnerInterceptor",["$q","$timeout","ezSpinnerConfig","ezSpinnerService",function(a,b,c,d){var e,f=0;return{request:function(g){return f++,e&&b.cancel(e),e=b(function(){!f||c.ignorePathRegex&&g.url.match(c.ignorePathRegex)||d.show(),e=b(function(){f=0,d.hide()},c.maxWait)},c.initWait),g||a.when(g)},response:function(c){return 0===--f&&(d.hide(),b.cancel(e)),c||a.when(c)},responseError:function(c){return--f||(d.hide(),b.cancel(e)),a.reject(c)}}}]).directive("ezSpinner",["ezSpinnerService",function(a){return{restrict:"EA",replace:!0,transclude:!0,template:'<div class="ez-spinner" ng-hide="hidden"><div ng-transclude></div></div>',link:function(b){b.hidden=!0,a.callback=function(a){b.hidden=a}}}}]);